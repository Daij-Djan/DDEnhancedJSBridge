<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
		<meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
        <title>Choose your Picture and Mask to combine</title>
        <meta http-equiv="Pragma" content="no-cache"/>
        <script src="./DDEnhancedJSBridge.js/" type="text/javascript">
        </script>
        <script type="text/javascript">
            function processPic(picId)
            {
                var obj = new DDBridgeObj();
                obj.addObject("data", document.getElementById('pic' + picId));
                obj.addObject("callback", "applyResultImage");
                
                obj.sendBridgeObject("imagefilter", "setImage");
            }
        </script>
        <script type="text/javascript">
            function processMask(maskId)
            {
                var obj = new DDBridgeObj();
                obj.addObject("data", document.getElementById('mask' + maskId));
                obj.addObject("callback", "applyResultImage");
                
                obj.sendBridgeObject("imagefilter", "setMaskImage");
            }
        </script>
        <script type="text/javascript">
            function applyResultImage(jsonDict, senderName)
            {
                var el = document.getElementById('resultImage');
                var obj = JSON.parse( jsonDict );
                el.src = "data:image/gif;base64," + obj.data;
            }
        </script>
        <style type="text/css">
            td {
                border: 1px solid black;
                text-align: center;
            }   
        </style>
    </head>
    <body>
        <table style="width:100%">
            <tr>
                <td colspan="2">
                    You may select a picture and mask by clicking on it. the resulting image is  shown at the bottom.
                </td>
            </tr>
            <tr>
                <td>
                    <a href="javascript:processPic(0)"><img id="pic0" src="pic0.png" width="125" height="125" alt="pic0"/></a>
                </td>
                <td>
                    <a href="javascript:processPic(1)"><img id="pic1" src="pic1.png" width="125" height="125" alt="pic1"/></a>
                </td>
            </tr>
            <tr>
                <td>
                    <a href="javascript:processPic(2)"><img id="pic2" src="pic2.png" width="125" height="125" alt="pic2"/></a>
                </td>
                
                <td>
                    <a href="javascript:processPic(3)"><img id="pic3" src="pic3.png" width="125" height="125" alt="pic3"/></a>
                </td>
            </tr>
            <tr>
                <td>
                    <a href="javascript:processPic(4)"><img id="pic4" src="pic4.png" width="125" height="125" alt="pic4"/></a>
                </td>
                
                <td>
                    <a href="javascript:processPic(5)"><img id="pic5" src="pic5.png" width="125" height="125" alt="pic5"/></a>
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    All masks on this page were obtained at <a href="http://psp-pals.com/">http://psp-pals.com/</a>
                </td>
            </tr>
            <tr>
                <td>
                    <a href="javascript:processMask(0)"><img id="mask0" src="mask0.png" width="125" height="125" alt="mask0"/></a>
                </td>
                <td>
                    <a href="javascript:processMask(1)"><img id="mask1" src="mask1.png" width="125" height="125" alt="mask1"/></a>
                </td>
            </tr>
            <tr>
                <td>
                    <a href="javascript:processMask(2)"><img id="mask2" src="mask2.png" width="125" height="125" alt="mask2"/></a>
                </td>
                <td>
                    <a href="javascript:processMask(3)"><img id="mask3" src="mask3.png" width="125" height="125" alt="mask3"/></a>
                </td>
            </tr>
            <tr>
                <td>
                    <a href="javascript:processMask(4)"><img id="mask4" src="mask4.png" width="125" height="125" alt="mask4"/></a>
                </td>
                
                <td>
                    <a href="javascript:processMask(5)"><img id="mask5" src="mask5.png" width="125" height="125" alt="mask5"/></a>
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    Resulting image (after a pic and mask have been combined)
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <img id="resultImage" src="" width="125" height="125" alt="pic+mask"/>
                </td>
            </tr>
        </table>
    </body>
</html>

